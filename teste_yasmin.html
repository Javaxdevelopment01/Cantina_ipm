<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste YASMIN API</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .box { border: 1px solid #ccc; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        textarea { width: 100%; height: 80px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        pre { background: #f4f4f4; padding: 10px; overflow-x: auto; }
        .status { font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>üõ†Ô∏è Teste da API YASMIN (Gemini)</h1>
    
    <div class="box">
        <h3>1. Configura√ß√£o</h3>
        <p>Certifique-se de que colocou a chave em <code>app/api/yasmin_api.php</code>.</p>
    </div>

    <div class="box">
        <h3>2. Enviar Mensagem</h3>
        <textarea id="msg" placeholder="Digite uma mensagem para a YASMIN...">Ol√°, o que tens para comer hoje?</textarea>
        <button onclick="testarAPI()">Enviar para a API</button>
    </div>

    <div class="box">
        <h3>3. Resultado</h3>
        <div id="status" class="status">Aguardando...</div>
        <pre id="output">...</pre>
    </div>

    <script>
        async function testarAPI() {
            const btn = document.querySelector('button');
            const output = document.getElementById('output');
            const status = document.getElementById('status');
            const msg = document.getElementById('msg').value;

            btn.disabled = true;
            status.textContent = "Enviando...";
            status.style.color = "blue";
            output.textContent = "Carregando...";

            try {
                // Ajuste o caminho se necess√°rio
                const response = await fetch('app/api/yasmin_api.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mensagem: msg })
                });

                const text = await response.text();
                
                try {
                    const json = JSON.parse(text);
                    status.textContent = json.success ? "Sucesso! (200 OK)" : "Erro na Resposta";
                    status.style.color = json.success ? "green" : "red";
                    output.textContent = JSON.stringify(json, null, 2);
                } catch (e) {
                    status.textContent = "Erro: Resposta n√£o √© JSON v√°lido";
                    status.style.color = "red";
                    output.textContent = text;
                }

            } catch (err) {
                status.textContent = "Erro de Rede";
                status.style.color = "red";
                output.textContent = err.toString();
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
